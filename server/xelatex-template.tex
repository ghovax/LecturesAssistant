$passoptions.latex()$
\documentclass[
$for(babel-otherlangs)$
  $babel-otherlangs$,
$endfor$
$if(babel-lang)$
  $babel-lang$,
$endif$
  10pt,
$if(papersize)$
  $papersize$paper,
$endif$
$for(classoption)$
  $classoption$$sep$,
$endfor$
]{$documentclass$}
$if(beamerarticle)$
\usepackage{beamerarticle} % needs to be loaded first
$endif$
\usepackage[svgnames,x11names,table]{xcolor}
\usepackage[margin=2cm]{geometry}
\usepackage{amsmath,amssymb}
\usepackage{graphicx}
\usepackage{eso-pic}
% Ensure images don't exceed page width/height
\setkeys{Gin}{width=\textwidth,height=0.8\textheight,keepaspectratio}

% Hyperref setup
\usepackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=NavyBlue,
  urlcolor=NavyBlue,
  citecolor=NavyBlue,
  linktoc=all,
  pdfborder={0 0 0},
  breaklinks=true
}
$if(cancel)$
\usepackage{cancel}
$endif$
$--
$-- section numbering
$--
$if(numbersections)$
\setcounter{secnumdepth}{$if(secnumdepth)$$secnumdepth$$else$5$endif$}
$else$
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
$endif$
$fonts.latex()$
$font-settings.latex()$
$common.latex()$
$for(header-includes)$
$header-includes$
$endfor$
$after-header-includes.latex()$
$hypersetup.latex()$
$if(pdf-trailer-id)$

\ifXeTeX
\special{pdf:trailerid [ $pdf-trailer-id$ ]}
\fi
\ifPDFTeX
\pdftrailerid{}
\pdftrailer{/ID [ $pdf-trailer-id$ ]}
\fi
\ifLuaTeX
\pdfvariable trailerid {[ $pdf-trailer-id$ ]}
\fi
$endif$

$if(title)$
\title{$title$$if(thanks)$\thanks{$thanks$}$endif$}
$endif$
$if(subtitle)$
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{$subtitle$}
$endif$
\author{$for(author)$$author$$sep$ \and $endfor$}
\date{$date$}

\begin{document}
$if(has-frontmatter)$
\frontmatter
$endif$

$if(qrcode-path)$
\AddToShipoutPictureBG*{
  \AtPageUpperLeft{
    \put(\LenToUnit{\paperwidth-3.8cm},\LenToUnit{-3.8cm}){
      \includegraphics[width=2.8cm]{$qrcode-path$}
    }
  }
}
$endif$

$if(title)$
\maketitle

$if(course-title)$
\noindent\textbf{$if(course-title-label)$$course-title-label$$else$Course$endif$:} $course-title$
$endif$

\vspace{1em}

$if(abstract)$
\begin{abstract}
$if(abstract-title)$
\renewcommand{\abstractname}{$abstract-title$}
$endif$
$abstract$
\end{abstract}
$endif$
$endif$

$if(audiofile)$
\subsection*{\textsf{$if(audio-files-title)$$audio-files-title$$else$Audio Files$endif$}}
\begin{itemize}
$for(audiofile)$
\item \texttt{$audiofile.filename$}\hfill\textsf{$audiofile.metadata$}
$endfor$
\end{itemize}
$endif$

$if(referencefile)$
\subsection*{\textsf{$if(reference-files-title)$$reference-files-title$$else$Reference Files$endif$}}
\begin{itemize}
$for(referencefile)$
\item \texttt{$referencefile.filename$}\hfill\textsf{$referencefile.metadata$}
$endfor$
\end{itemize}
$endif$

$for(include-before)$
$include-before$

$endfor$
$if(toc)$
$if(toc-title)$
\renewcommand*\contentsname{$toc-title$}
$endif$
{
\setcounter{tocdepth}{$toc-depth$}
\tableofcontents
}
$endif$
$if(lof)$
\listoffigures
$endif$
$if(lot)$
\listoftables
$endif$
$if(linestretch)$
\setstretch{$linestretch$}
$endif$

$body$

$if(has-frontmatter)$
\backmatter
$endif$
$if(nocite-ids)$
\nocite{$for(nocite-ids)$$it$$sep$, $endfor$}
$endif$
$if(natbib)$
$if(bibliography)$
$if(biblio-title)$
$if(has-chapters)$
\renewcommand\bibname{$biblio-title$}
$else$
\renewcommand\refname{$biblio-title$}
$endif$
$endif$
\bibliography{$for(bibliography)$$bibliography$$sep$,$endfor$}

$endif$
$endif$
$if(biblatex)$
\printbibliography$if(biblio-title)$[title=$biblio-title$]$endif$

$endif$
$for(include-after)$
$include-after$

$endfor$
\end{document}
